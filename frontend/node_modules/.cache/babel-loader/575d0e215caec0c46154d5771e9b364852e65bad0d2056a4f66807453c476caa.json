{"ast":null,"code":"import _objectSpread from\"C:/Users/ashu/Documents/ashu-shop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext();export function CartProvider(_ref){let{children}=_ref;const[cart,setCart]=useState(()=>{try{return JSON.parse(localStorage.getItem('cart'))||[];}catch(_unused){return[];}});useEffect(()=>{localStorage.setItem('cart',JSON.stringify(cart));},[cart]);const addToCart=function(product){let qty=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;setCart(prev=>{const idx=prev.findIndex(p=>p.id===product.id);if(idx!==-1){const next=[...prev];next[idx]=_objectSpread(_objectSpread({},next[idx]),{},{quantity:(next[idx].quantity||0)+qty});return next;}return[...prev,_objectSpread(_objectSpread({},product),{},{quantity:qty})];});};const removeFromCart=id=>{setCart(prev=>prev.filter(p=>p.id!==id));};const increase=id=>{setCart(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{quantity:(p.quantity||0)+1}):p));};const decrease=id=>{setCart(prev=>prev.map(p=>p.id===id?_objectSpread(_objectSpread({},p),{},{quantity:Math.max(1,(p.quantity||1)-1)}):p));};const clearCart=()=>setCart([]);const totalItems=cart.reduce((s,p)=>s+(p.quantity||0),0);const totalPrice=cart.reduce((s,p)=>s+(p.price||0)*(p.quantity||0),0);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart,setCart,addToCart,removeFromCart,increase,decrease,clearCart,totalItems,totalPrice},children:children});}","map":{"version":3,"names":["React","createContext","useEffect","useState","jsx","_jsx","CartContext","CartProvider","_ref","children","cart","setCart","JSON","parse","localStorage","getItem","_unused","setItem","stringify","addToCart","product","qty","arguments","length","undefined","prev","idx","findIndex","p","id","next","_objectSpread","quantity","removeFromCart","filter","increase","map","decrease","Math","max","clearCart","totalItems","reduce","s","totalPrice","price","Provider","value"],"sources":["C:/Users/ashu/Documents/ashu-shop/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport function CartProvider({ children }) {\r\n  const [cart, setCart] = useState(() => {\r\n    try {\r\n      return JSON.parse(localStorage.getItem('cart')) || [];\r\n    } catch {\r\n      return [];\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  const addToCart = (product, qty = 1) => {\r\n    setCart(prev => {\r\n      const idx = prev.findIndex(p => p.id === product.id);\r\n      if (idx !== -1) {\r\n        const next = [...prev];\r\n        next[idx] = { ...next[idx], quantity: (next[idx].quantity || 0) + qty };\r\n        return next;\r\n      }\r\n      return [...prev, { ...product, quantity: qty }];\r\n    });\r\n  };\r\n\r\n  const removeFromCart = (id) => {\r\n    setCart(prev => prev.filter(p => p.id !== id));\r\n  };\r\n\r\n  const increase = (id) => {\r\n    setCart(prev => prev.map(p => p.id === id ? { ...p, quantity: (p.quantity || 0) + 1 } : p));\r\n  };\r\n\r\n  const decrease = (id) => {\r\n    setCart(prev => prev.map(p => p.id === id ? { ...p, quantity: Math.max(1, (p.quantity || 1) - 1) } : p));\r\n  };\r\n\r\n  const clearCart = () => setCart([]);\r\n\r\n  const totalItems = cart.reduce((s, p) => s + (p.quantity || 0), 0);\r\n  const totalPrice = cart.reduce((s, p) => s + (p.price || 0) * (p.quantity || 0), 0);\r\n\r\n  return (\r\n    <CartContext.Provider value={{\r\n      cart, setCart, addToCart, removeFromCart, increase, decrease, clearCart, totalItems, totalPrice\r\n    }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}