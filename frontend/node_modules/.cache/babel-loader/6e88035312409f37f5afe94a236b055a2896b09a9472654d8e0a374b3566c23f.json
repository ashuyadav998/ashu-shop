{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{useParams,Link}from'react-router-dom';import{getProducts,getImageUrl}from'../api';import{CartContext}from'../context/CartContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductDetail(){const{id}=useParams();const[product,setProduct]=useState(null);const[randomProducts,setRandomProducts]=useState([]);const{addToCart}=useContext(CartContext);useEffect(()=>{getProducts().then(products=>{const found=products.find(p=>String(p.id)===id);setProduct(found);// Productos aleatorios excluyendo el actual\nconst otherProducts=products.filter(p=>String(p.id)!==id);// Mezclamos aleatoriamente\nconst shuffled=otherProducts.sort(()=>0.5-Math.random());// Tomamos los primeros 4\nsetRandomProducts(shuffled.slice(0,4));});},[id]);if(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 text-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Cargando...\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-5 align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(product.image),alt:product.name,className:\"img-fluid rounded shadow-sm\",style:{maxHeight:'400px',objectFit:'contain'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"fw-bold\",children:product.name}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-primary mb-3\",children:[\"$\",product.price.toFixed(2)]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:product.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stock disponible:\"}),\" \",product.stock]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-lg btn-primary mt-2\",onClick:()=>addToCart(product),disabled:product.stock===0,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-cart-plus me-2\"}),\" A\\xF1adir al carrito\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Tambi\\xE9n te puede interesar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:randomProducts.map(p=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card h-100 shadow-sm\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(p.id),style:{textDecoration:'none',color:'inherit'},children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(p.image),alt:p.name,className:\"card-img-top\",style:{objectFit:\"cover\",height:\"150px\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-primary\",children:[\"$\",p.price.toFixed(2)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary w-100\",onClick:()=>addToCart(p),disabled:p.stock===0,children:\"A\\xF1adir al carrito\"})})]})},p.id))})]})]});}export default ProductDetail;","map":{"version":3,"names":["React","useEffect","useState","useContext","useParams","Link","getProducts","getImageUrl","CartContext","jsx","_jsx","jsxs","_jsxs","ProductDetail","id","product","setProduct","randomProducts","setRandomProducts","addToCart","then","products","found","find","p","String","otherProducts","filter","shuffled","sort","Math","random","slice","className","children","role","src","image","alt","name","style","maxHeight","objectFit","price","toFixed","description","stock","onClick","disabled","map","to","concat","textDecoration","color","height"],"sources":["C:/Users/ashu/Documents/ashu-shop/frontend/src/components/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { getProducts, getImageUrl } from '../api';\r\nimport { CartContext } from '../context/CartContext';\r\n\r\nfunction ProductDetail() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const [randomProducts, setRandomProducts] = useState([]);\r\n  const { addToCart } = useContext(CartContext);\r\n\r\n  useEffect(() => {\r\n    getProducts().then(products => {\r\n      const found = products.find(p => String(p.id) === id);\r\n      setProduct(found);\r\n\r\n      // Productos aleatorios excluyendo el actual\r\n      const otherProducts = products.filter(p => String(p.id) !== id);\r\n      // Mezclamos aleatoriamente\r\n      const shuffled = otherProducts.sort(() => 0.5 - Math.random());\r\n      // Tomamos los primeros 4\r\n      setRandomProducts(shuffled.slice(0, 4));\r\n    });\r\n  }, [id]);\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"container mt-5 text-center\">\r\n        <div className=\"spinner-border text-primary\" role=\"status\">\r\n          <span className=\"visually-hidden\">Cargando...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row g-5 align-items-center\">\r\n        {/* Imagen del producto */}\r\n        <div className=\"col-md-6 text-center\">\r\n          <img\r\n            src={getImageUrl(product.image)}\r\n            alt={product.name}\r\n            className=\"img-fluid rounded shadow-sm\"\r\n            style={{ maxHeight: '400px', objectFit: 'contain' }}\r\n          />\r\n        </div>\r\n\r\n        {/* Información del producto */}\r\n        <div className=\"col-md-6\">\r\n          <h2 className=\"fw-bold\">{product.name}</h2>\r\n          <h3 className=\"text-primary mb-3\">${product.price.toFixed(2)}</h3>\r\n          <p className=\"text-muted\">{product.description}</p>\r\n\r\n          {/* Stock disponible */}\r\n          <p className=\"mb-2\">\r\n            <strong>Stock disponible:</strong> {product.stock}\r\n          </p>\r\n\r\n          {/* Botón de añadir al carrito */}\r\n          <button\r\n            className=\"btn btn-lg btn-primary mt-2\"\r\n            onClick={() => addToCart(product)}\r\n            disabled={product.stock === 0}\r\n          >\r\n            <i className=\"fas fa-cart-plus me-2\"></i> Añadir al carrito\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Productos aleatorios */}\r\n      <div className=\"mt-5\">\r\n        <h3>También te puede interesar</h3>\r\n        <div className=\"row\">\r\n          {randomProducts.map(p => (\r\n            <div className=\"col-md-3 mb-3\" key={p.id}>\r\n              <div className=\"card h-100 shadow-sm\">\r\n                <Link to={`/product/${p.id}`} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n                  <img\r\n                    src={getImageUrl(p.image)}\r\n                    alt={p.name}\r\n                    className=\"card-img-top\"\r\n                    style={{ objectFit: \"cover\", height: \"150px\" }}\r\n                  />\r\n                  <div className=\"card-body\">\r\n                    <h6 className=\"card-title\">{p.name}</h6>\r\n                    <p className=\"card-text text-primary\">${p.price.toFixed(2)}</p>\r\n                  </div>\r\n                </Link>\r\n                <div className=\"card-body\">\r\n                  <button\r\n                    className=\"btn btn-sm btn-primary w-100\"\r\n                    onClick={() => addToCart(p)}\r\n                    disabled={p.stock === 0}\r\n                  >\r\n                    Añadir al carrito\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}